# Lists
---


## Questions:
- How can I store multiple values in a single variable?

## Learning Objectives:
- Explain why programs need collections of values
- Write programs that create  lists, index them, slice them, and modify them through assignment and method calls
---

## A list stores many values in a single structure

- We have seen how to store values by assigning them to variables
- With data sets of any reasonable size, it would rapidly become inefficient and confusing to store each data point with a separate variable name
- For example, here are average life expectancies for Canada over 100 years, from the Gapminder data set:


```python
life_expcy_1900 = 48.1
life_expcy_1920 = 56.6
life_expcy_1940 = 64.0
life_expcy_1960 = 71.0
life_expcy_1980 = 75.2
life_expcy_2000 = 79.2
```

- While you can store the data this way, it requires a lot of variable names. As well, although there is structure in the data (they reflect an ordered sequence of dates), this ordering is not reflected in how the data are stored. 
- We can use a **list** to store many values together
- Lists are defined by one or more items contained within square brackets `[...]`, with individual values (*list items*) separated by commas `,`:

~~~python
life_expcy = [48.1, 56.6, 64.0, 71.0, 75.2, 79.2]
print('Life expectancies:', life_expcy)
~~~


```python

```

Like strings, we can use the `len()` function to get the length of a list 
~~~python
print('length:', len(life_expcy))
~~~

Here, length refers to the number of items in the list


```python

```

## Lists may contain values of different types

*   A single list may contain virtually any Python data type, including integers, floats, strings, and even other lists!.

~~~python
personal_info = ['First Name', 'Costanza', 
                'Last Name', 'Raghnall', 
                'Age', 42, 
                'Height', 1.65, 
                'Children', ['Apoorva', 'Columbanus']
               ]
~~~

Note in the above that Python allows us to input a list over multiple lines. Jupyter nicely indents the additional lines to help us see that they are continuations of the same list.

(*Note: generated by [https://www.behindthename.com](https://www.behindthename.com)*)


```python

```

## Indexing is similar for lists and strings

We previously saw how we could get single characters from a character string, using indexes in square brackets:

~~~python
element = 'carbon'
print('zeroth character:', element[0])
print('third character:', element[3])
~~~


```python

```

## Use an item's index to fetch it from a list

Indexing works for lists as it does for strings:

~~~python
print('zeroth item of life_expcy:', life_expcy[0])
print('fourth item of life_expcy:', life_expcy[4])
~~~


```python

```

## Indexing can be used to replace a value in a list

~~~python
life_expcy[0] = 48.3
print(life_expcy)
~~~


```python

```

## *Appending* items to a list lengthens it

- Use the `.append()` method to add items to the end of a list
- here we will add the life expectancy for 2020 in Canada to extend our list

~~~python
print(life_expcy)
life_expcy.append(82.3)
print(life_expcy)
~~~


```python

```

## Methods
*   `.append()` is a *method* of lists. Methods are like functions, but tied to a particular object. In other words, the fact that there is a list.append() method does not mean that we can use `.append()` with other Python objects that aren't lists. 
*   Use object_name`.method_name()` to call methods.
*   We will meet other methods of lists as we go along.
    *   Use `help(list)` for a preview of list methods.
    

## Extending a list    

- the `.append()` method only allows you to add a single item to the end of a list
- see what happens if you try to append a list to an existing list:

~~~python
life_expcy_2000s = [85.1, 87.3, 89.5, 91.6]
life_expcy.append(life_expcy_2000s)
print(life_expcy)
~~~


```python

```

The result is what we call a *nested list*, where the appended list is stored as a single list item — of type `list` — in the original list. This is a consequence of the fact that lists can contain multiple types.

In this case, what we want is a *flat list*, a single list of floats. 

The `.extend()` method will do this. It is similar to `append`, but it allows you to combine two lists.  For example:

~~~python
life_expcy = [48.1, 56.6, 64.0, 71.0, 75.2, 79.2]
life_expcy_2000s = [82.3, 85.1, 87.3, 89.5, 91.6]

life_expcy.extend(life_expcy_2000s)
print(life_expcy)
~~~


```python

```

## Use `del` to remove items from a list entirely

- We use `del list_name[index]` to remove an element from a list (in the example, 9 is not a prime number) and thus shorten it.
- `del` is not a function or a method, but a *statement* in Python. That is why it is followed by a space, rather than providing arguments in parentheses.
- In the example below, we extend one list with another, but then we notice that the last value in the first list, is duplicated as the first value in the second list. So we need to remove one copy of the repeated value. 


~~~python
life_expcy = [48.1, 56.6, 64.0, 71.0, 75.2, 79.2, 82.3]
life_expcy_2000s = [82.3, 85.1, 87.3, 89.5, 91.6]
life_expcy.extend(life_expcy_2000s)
print('With duplicated value:', life_expcy)

del life_expcy[6]
print('Removed duplicate value:', life_expcy)
~~~


```python

```

## An empty list contains no values

- We can assign `[]` to a variable name, to represent a list that doesn't contain any values.
- This can be a good starting point if we want to create a list by appending values as we calculate them
- The example below is trivial, but in later lessons we will see better uses for empty lists

~~~python
x = []
y = 1
x.append(y)
x.append(y + 7)
print(x)
~~~


```python

```

## Difference between strings and lists

- Both strings and lists are called **collections** in Python, so they can be indexed
- Although indexing works similarly for string and lists, the two data types are different in other ways
- Importantly, strings are **immutable** — they cannot be changed after they have been created
    - Python considers the string to be a single value with parts, not a collection of values
- In contrast, lists are **mutable** — as we saw above, they can be changed such as by:
    - using indexing to change a single list element
    - appending items to a list
    - deleting items from a list

So because we defined `element` above as a string, we cannot change one letter in the string:
~~~python
element[0] = 'C'
~~~


```python

```

Likewise, you cannot `.append()` to a string, nor can you `del` a string element.


```python

```

## Indexing beyond the end of the collection is an error.

Python reports an `IndexError` if we attempt to access a value that doesn't exist.
*   This is a kind of runtime error, as discussed in the section on built-ins
*   It's not a syntax error, because it cannot be detected as the code is parsed before being run; this is because the index might be calculated based on data

~~~python
print('99th element of life_expcy is:', life_expcy[99])
~~~


```python

```

---
## Exercises 

## Fill in the Blanks

Fill in the blanks so that the program below produces the output shown.

~~~python
values = ____
values.____(1)
values.____(3)
values.____(5)
print('first time:', values)
values = values[____]
print('second time:', values)
~~~

Output: 

`first time: [1, 3, 5]`

`second time: [3, 5]`


```python
### BEGIN SOLUTION
values = []
values.append(1)
values.append(3)
values.append(5)
print('first time:', values)
values = values[1:]
print('second time:', values)
### END SOLUTION
```

    first time: [1, 3, 5]
    second time: [3, 5]


## How Large is a Slice?

Imagine we have a list like `life_expcy` above. If `a` and `b` are both non-negative integers (e.g., `2` and `5`), how long is the list `life_expcy[a:b]`?


```python

```

## Solution
The list `life_expcy[a:b]` has `b - a` elements.  For example, `values[2:5]` has the 3 elements `life_expcy[2]`, `life_expcy[3]`, and `life_expcy[4]`. 

Note that the expression will only work if `b` is less than the total length of the list `life_expcy`.

## From Strings to Lists and Back

Given this:

~~~python
print('string to list:', list('tin'))
print('list to string:', ''.join(['g', 'o', 'l', 'd']))
~~~

~~~
string to list: ['t', 'i', 'n']
list to string: gold
~~~

1.  What does `list('some string')` do?
2.  What does `'-'.join(['x', 'y', 'z'])` generate?


```python

```

## Solution
1. [`list('some string')`](https://docs.python.org/3/library/stdtypes.html#list) converts a string into a list containing all of its characters.
2. [`join`](https://docs.python.org/3/library/stdtypes.html#str.join) returns a string that is the _concatenation_
   of each string element in the list and adds the separator between each element in the list. This results in
   `x-y-z`. The separator between the elements is the string that provides this method.

## Working With the End
What does the following program print?

~~~python
element = 'helium'
print(element[-1])
~~~

1.  How does Python interpret a negative index?
2.  If a list or string has N elements,
    what is the most negative index that can safely be used with it,
    and what location does that index represent?
3.  If `values` is a list, what does `del values[-1]` do?
4.  How can you display all elements but the last one without changing `values`?
    (Hint: you will need to combine slicing and negative indexing.)

## Solution
The program prints `m`.
1. Python interprets a negative index as starting from the end (as opposed to
   starting from the beginning).  The last element is `-1`.
2. The last index that can safely be used with a list of N elements is element
   `-N`, which represents the first element.
3. `del values[-1]` removes the last element from the list.
4. `values[:-1]`


## Stepping Through a List

What does the following program print?

~~~python
element = 'fluorine'
print(element[::2])
print(element[::-1])
~~~
1.  If we write a slice as `low:high:stride`, what does `stride` do?
2.  What expression would select all of the even-numbered items from a collection?


```python

```

## Solution
The program prints
~~~
furn
eniroulf
~~~

1. `stride` is the step size of the slice
2. The slice `1::2` selects all even-numbered items from a collection: it starts
   with element `1` (which is the second element, since indexing starts at `0`),
   goes on until the end (since no `end` is given), and uses a step size of `2`
   (i.e., selects every second element).
{: .solution}
{: .challenge}

## Slice Bounds

What does the following program print?

~~~python
element = 'lithium'
print(element[0:20])
print(element[-1:3])
~~~


```python

```

## Sort and Sorted

What do these two programs print?
In simple terms, explain the difference between `sorted(letters)` and `letters.sort()`.

~~~python
# Program A
letters = list('gold')
result = sorted(letters)
print('letters is', letters, 'and result is', result)
~~~


```python

```

~~~python
# Program B
letters = list('gold')
result = letters.sort()
print('letters is', letters, 'and result is', result)
~~~


```python

```

## Solution
Program A prints
~~~python
letters is ['g', 'o', 'l', 'd'] and result is ['d', 'g', 'l', 'o']
~~~

Program B prints
~~~python
letters is ['d', 'g', 'l', 'o'] and result is None
~~~

`sorted(letters)` returns a sorted copy of the list `letters` (the original
list `letters` remains unchanged), while `letters.sort()` sorts the list
`letters` in-place and does not return anything.


## Copying (or Not)

What do these two programs print?
In simple terms, explain the difference between `x = y` and `x = y[:]`.

~~~python
# Program A
y = list('gold')
x = y      # simple assignment
x[0] = 'D'
print('x is', x, 'and y is', y)
~~~


```python

```

~~~python
# Program B
# Program A
y = list('gold')
x = y[:]      # simple assignment
x[0] = 'D'
print('x is', x, 'and y is', y)
~~~


```python

```

## Solution
Program A prints
~~~
x is ['D', 'o', 'l', 'd'] and y is ['D', 'o', 'l', 'd']
~~~

Program B prints
~~~
x is ['D', 'o', 'l', 'd'] and y is ['g', 'o', 'l', 'd']
~~~

`x = y` makes `x` a reference to the list `y`; `x` and `y` point
towards the same object.

`x = y[:]` however creates a new list object `x` containing all elements
from the list `y`; `x` and `y` are different objects.


```python

```

## Last Character of a String

If Python starts counting from zero,
and `len` returns the number of characters in a string,
what index expression will get the last character in the string `name`?
(Note: we will see a simpler way to do this in a later episode.)


```python

```

## Solution

`name[len(name) - 1]`


## Summary of Key Points:
- A list stores many values in a single structure.
- Use an item's index to fetch it from a list.
- Lists' values can be replaced by assigning to them.
- Appending items to a list lengthens it.
- Use `del` to remove items from a list entirely.
- The empty list contains no values.
- Lists may contain values of different types.
- Character strings can be indexed like lists.
- Character strings are immutable.
- Indexing beyond the end of the collection is an error.

---
This lesson is adapted from the [Software Carpentry](https://software-carpentry.org/lessons/) [Plotting and Programming in Python](http://swcarpentry.github.io/python-novice-gapminder/) workshop. 

Licensed under [CC-BY 4.0](https://creativecommons.org/licenses/by/4.0/) 2021 by [SURGE](https://github.com/surge-dalhousie)
